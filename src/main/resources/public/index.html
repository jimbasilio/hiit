<!DOCTYPE html>
<html>
<head>
<meta name="google-signin-clientid" content="61500060365-alek9hn53hlc158pbaiiuf2jaanckb9d.apps.googleusercontent.com" />
<meta name="google-signin-scope" content="https://www.googleapis.com/auth/plus.login" />
<meta name="google-signin-requestvisibleactions" content="http://schema.org/AddAction" />
<meta name="google-signin-cookiepolicy" content="single_host_origin" />

<!-- CSSMINIFY START -->
<link rel="stylesheet" type="text/css" href="static/bower_components/bootstrap/dist/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="static/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" />
<link rel="stylesheet" type="text/css" href="static/bower_components/font-awesome/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="static/angular_components/css/hiit.css" />
<!-- CSSMINIFY END -->


<script src="static/bower_components/angular/angular.js" ></script>
<script src="static/bower_components/angular-route/angular-route.min.js" ></script>
<script src="static/bower_components/jquery/dist/jquery.min.js" ></script>
<script src="static/bower_components/bootstrap/dist/js/bootstrap.min.js" ></script>

<!-- JSMINIFY START -->
<script src="static/angular_components/js/hiit.js" ></script>
<script src="static/angular_components/js/services/ProgramService.js" ></script>
<script src="static/angular_components/js/controllers/AboutController.js" ></script>
<script src="static/angular_components/js/controllers/ContactController.js" ></script>
<script src="static/angular_components/js/controllers/MainController.js" ></script>
<script src="static/angular_components/js/controllers/ProgramController.js" ></script>
<script src="static/angular_components/js/webworkers/appCacheWorker.js" ></script>
<!-- JSMINIFY END -->

<meta charset="UTF-8">
<title>HIIT Timer</title>
</head>
<body data-ng-app="hiit" data-ng-controller="MainController">

  <!-- HEADER AND NAVBAR -->
  <header>
    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">HIIT IT!</a>
        </div>

        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><i class="fa fa-home"></i> Home</a></li>
          <li><a href="#program"><i class="fa fa-save"></i> Programs</a></li>
          <li><a href="#about"><i class="fa fa-shield"></i> About</a></li>
          <li><a href="#contact"><i class="fa fa-comment"></i> Contact</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <script type="text/javascript">
			(function() {
				var po = document.createElement('script');
				po.type = 'text/javascript';
				po.async = true;
				po.src = 'https://apis.google.com/js/client:plusone.js?onload=render';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(po, s);
			})();

			/* Executed when the APIs finish loading */
			function render() {

				// Additional params including the callback, the rest of the params will
				// come from the page-level configuration.
				var additionalParams = {
					'callback' : signinCallback
				};

				// Attach a click listener to a button to trigger the flow.
				var signinButton = document.getElementById('signinButton');
				signinButton.addEventListener('click', function() {
					gapi.auth.signIn(additionalParams); // Will use page level configuration
				});
			}
		</script>

  <script type="text/javascript">
			function signinCallback(authResult) {
				var email = '';
				var given_name = '';
				var family_name = '';
				if (authResult['status']['signed_in']) {
					// Update the app to reflect a signed in user
					// Hide the sign-in button now that the user is authorized, for example:
					document.getElementById('signinButton').setAttribute(
							'style', 'display: none');

					// learned from http://stackoverflow.com/questions/20487092/google-sign-in-with-javascript-callback-issue
					gapi.client.load('oauth2', 'v2', function() {
						gapi.client.oauth2.userinfo.get().execute(
								function(resp) {
									email = resp.email; //get user email
									given_name = resp.given_name; //get user email
									family_name = resp.family_name;
									id = resp.id;
								});
					});

					console.log('hello ' + email);
				} else {
					// Update the app to reflect a signed out user
					// Possible error values:
					//   "user_signed_out" - User is signed-out
					//   "access_denied" - User denied access to your app
					//   "immediate_failed" - Could not automatically log in the user
					console.log('Sign-in state: ' + authResult['error']);
				}
			}
		</script>


  <button id="signinButton">Sign in with Google</button>

  <div class="col-md-12">
    <div ng-view></div>
  </div>

</body>
</html>